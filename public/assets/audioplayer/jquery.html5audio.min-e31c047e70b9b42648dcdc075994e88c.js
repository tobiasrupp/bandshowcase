!function(t){t.fn.html5audio=function(e){function a(){var a=0==Sa.find("div[class='fontMeasure']").length?t("<div/>").addClass("fontMeasure").appendTo(Sa):Sa.find("div[class='fontMeasure']");Xn=new apTextScroller,Xn.init(a,Fa,Ra,"left",e.scrollSeparator,e.scrollSpeed)}function i(t){if(We&&!on&&!Ml){if(!vl){if(ll){if(t=t.originalEvent.touches,!(t&&0<t.length))return!1}else t.preventDefault();vl=!0,Je.bind(rl,function(t){t:{var e;if(ll){if(t.originalEvent.touches&&t.originalEvent.touches.length)e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),n(e)}}).bind(sl,function(t){t:if(vl){vl=!1,Je.unbind(rl).unbind(sl);var e;if(ll){if(t.originalEvent.touches&&t.originalEvent.touches.length)e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),n(e)}})}return!1}}function n(t){"horizontal"==hl?cl=Math.max(0,Math.min(1,(t.pageX-_l.offset().left)/kl)):(cl=Math.max(0,Math.min(1,(t.pageY-_l.offset().top)/kl)),cl=1-cl),o()}function l(){return!We||on?!1:(fl?(cl=dl,fl=!1):(dl=cl,cl=0,fl=!0),void 0)}function o(){"horizontal"==hl?Pl.css("width",cl*kl+"px"):Pl.css("height",cl*kl+"px"),un&&("youtube_single"==Zi||"youtube_playlist"==Zi?la?Ln&&Ln.setVolume(cl):"undefined"!=typeof ue($n)&&ue($n).pb_setVolume(cl):xi?On&&(On.volume=cl):"undefined"!=typeof ue(Sn)&&ue(Sn).pb_setVolume(cl)),cl>0?Sa.find(".player_volume").find("img").attr("src",ya):Sa.find(".player_volume").find("img").attr("src",ba),isMobile&&ul&&(ml&&clearTimeout(ml),ml=setTimeout(bl,gl))}function r(){ul&&ml&&clearTimeout(ml),Tl.css("display","block"),pl.bind("mousemove",d).bind("mouseout",s),Je.bind("mouseout",s)}function s(){ul&&(ml&&clearTimeout(ml),ml=setTimeout(bl,gl)),Tl.css("display","none"),pl.unbind("mousemove",d).unbind("mouseout",s),Je.unbind("mouseout",s)}function d(t){if("horizontal"==hl){var e=t.pageX-_l.offset().left;if(!Se(e))return!1;0>e?e=0:e>kl&&(e=kl),t=parseInt(t.pageX-pl.offset().left-Tl.width()/2,10),Tl.css("left",t+"px"),e=Math.max(0,Math.min(1,e/kl)),e=parseInt(100*e,10)}else{if(e=t.pageY-_l.offset().top,!Se(e))return!1;0>e?e=0:e>kl&&(e=kl),t=parseInt(e-Tl.height()/2,10),Tl.css("top",t+wl+"px"),e=Math.max(0,Math.min(1,e/kl)),e=parseInt(100*(1-e),10)}Tl.find("p").html(e+" %")}function u(t){if(We&&!on&&un&&!vl&&!rn){if(!Ml){if(ll){if(t=t.originalEvent.touches,!(t&&0<t.length))return!1}else t.preventDefault();Ml=!0,Je.bind(rl,function(t){t:{var e;if(ll){if(t.originalEvent.touches&&t.originalEvent.touches.length)e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)break t;e=t.originalEvent.changedTouches}if(1<e.length)break t;e=e[0]}else e=t;t.preventDefault(),c(e,t)}}).bind(sl,function(t){f(t)})}return!1}}function f(t){if(Ml){Ml=!1,Je.unbind(rl).unbind(sl);var e;if(ll){if(t.originalEvent.touches&&t.originalEvent.touches.length)e=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)return!1;e=t.originalEvent.changedTouches}if(1<e.length)return!1;e=e[0]}else e=t;t.preventDefault(),c(e,t)}if(Ca)var a=setTimeout(function(){a&&clearTimeout(a),Dl=!1},500);return!1}function c(t,e){if(Ca){if(Ea){if(k(e))return Zl||Bl>Kl-Jl?!1:(Ml||(w(!0),Vl.clearRect(0,0,Ql,Gl),b(to),_()),!1);if(!Zl)return!1;Dl=!0;var a=t.pageX-Nl.offset().left-Ql/2,i=t.pageY-Nl.offset().top-Gl/2,a=Math.atan2(i,a);a>-1*Math.PI&&a<-.5*Math.PI&&(a=2*Math.PI+a),to=a=Math.max(0,Math.min((a+Math.PI/2)/2*Math.PI*10))/100,Vl.clearRect(0,0,Ql,Gl),b(to),_()}}else{xl=t.pageX-Al.offset().left,0>xl?xl=0:xl>Ol&&(xl=Ol),Cl.width(xl);var a=Math.max(0,Math.min(1,xl/Ol))}return Se(a)?(Il=to,p(a),void 0):!1}function p(t){"youtube_single"==Zi||"youtube_playlist"==Zi?la?(t=(t*Ln.getDuration()).toFixed(1),Se(t)&&Ln.seek(t)):"undefined"!=typeof ue($n)&&ue($n).pb_seek(t):xi?On&&On.seekable&&0<On.seekable.length&&(On.currentTime=!ia||isMobile?t*On.duration:t*On.duration>=On.buffered.end(0)-5?On.buffered.end(0)-5:t*On.duration):"undefined"!=typeof ue(Sn)&&ue(Sn).pb_seek(t)}function h(){un&&(eo.css("display","block"),El.bind("mousemove",y).bind("mouseout",m),Je.bind("mouseout",m))}function m(){un&&(eo.css("display","none"),El.unbind("mousemove",y).unbind("mouseout",m),Je.unbind("mouseout",m))}function y(t){if(Ca){if(Ea){if(k(t))return eo.css("display","none"),!1;e=t.pageX-Nl.offset().left,t=t.pageY-Nl.offset().top,t=Math.atan2(t-Gl/2,e-Ql/2),t>-1*Math.PI&&t<-.5*Math.PI&&(t=2*Math.PI+t),e=Math.max(0,Math.min((t+Math.PI/2)/2*Math.PI*10))/100,eo.css("display","block")}}else{var e=t.pageX-Al.offset().left;if(!Se(e))return!1;0>e?e=0:e>Ol&&(e=Ol),t=parseInt(t.pageX-El.offset().left-eo.width()/2,10),eo.css("left",t+"px"),e=Math.max(0,Math.min(1,e/Ol))}return Se(e)?(g(e),void 0):!1}function g(t){if(!Se(t))return!1;var e,a;return"youtube_single"==Zi||"youtube_playlist"==Zi?la?(a=Ln.getDuration(),e=t*a):"undefined"!=typeof ue($n)&&(a=ue($n).pb_getFlashDuration(),e=t*a):xi?On&&(a=On.duration,e=t*a):"undefined"!=typeof ue(Sn)&&(a=ue(Sn).pb_getFlashDuration(),e=t*a),Se(e)&&Se(a)?(eo.find("p").html(Ce(e)+li+Ee(a)),void 0):!1}function b(t){Vl.beginPath(),Vl.arc(Ql/2,Gl/2,$l-zl/2,-Wl,Xl*t-Wl,!1),Vl.strokeStyle=Ul,Vl.lineCap="butt",Vl.lineWidth=zl,Vl.stroke()}function v(t){Hl.beginPath(),Hl.arc(Ql/2,Gl/2,$l-zl/2,-Wl,Xl*t-Wl,!1),Hl.strokeStyle=Yl,Hl.lineCap="butt",Hl.lineWidth=zl,Hl.stroke()}function _(){if(pn)t=62,e=57,Vl.fillStyle=Ul,Vl.fillRect(t,e,14,45),Vl.fillRect(t+23,e,14,45);else{var t=65,e=57,a=65-t,i=102-e,n=Math.atan2(i,a)-Math.PI/3,i=Math.sqrt(a*a+i*i),a=Math.cos(n)*i+t,n=Math.sin(n)*i+e;Vl.beginPath(),Vl.fillStyle=Ul,Vl.moveTo(t,e),Vl.lineTo(65,102),Vl.lineTo(a,n),Vl.fill()}}function k(t){var e;if(ll){if(t.originalEvent.touches&&t.originalEvent.touches.length)t=t.originalEvent.touches;else{if(!t.originalEvent.changedTouches||!t.originalEvent.changedTouches.length)return!1;t=t.originalEvent.changedTouches}if(1<t.length)return!1;e=t[0]}else e=t;t=e.pageX-Nl.offset().left,e=e.pageY-Nl.offset().top;var a=Ql/2,i=Gl/2;return Bl=Math.sqrt((t-a)*(t-a)+(e-i)*(e-i)),Math.sqrt((t-a)*(t-a)+(e-i)*(e-i))<Kl}function P(e){0!=Sa.find(".componentPlaylist").length&&(mn?"vertical"==ci?ja.outerHeight(!0)>=Da.height()?(mn.reinitialise(),e&&(mn.scrollToY(0),t(".jspPane").css("top","0px"))):(mn.destroy(),mn=null):(mn.reinitialise(),e&&(mn.scrollToX(0),t(".jspPane").css("left","0px"))):(e=Sa.find(".componentPlaylist"),mn=e.jScrollPane().data().jsp,e.bind("jsp-initialised",function(){}).jScrollPane({mouseWheelSpeed:20}),"horizontal"==ci&&(isMobile||e.bind("mousewheel",T))))}function T(t,e){return!We||on?!1:(mn&&mn.scrollByX(100*(e>0?-1:1)),!1)}function w(t){if(pn){if("youtube_single"==Zi||"youtube_playlist"==Zi){if(!tl)return!1;la?Ln.togglePlayback():("undefined"!=typeof ue($n)&&ue($n).pb_togglePlayback(),un=!0)}else xi?On&&On.pause():"undefined"!=typeof ue(Sn)&&ue(Sn).pb_pause();pn=!1,Me("off")}else{if("youtube_single"==Zi||"youtube_playlist"==Zi){if(!tl)return!1;la?isMobile?!el&&Va?(We=!1,ee("on")):Ln.togglePlayback():Ln.togglePlayback():("undefined"!=typeof ue($n)&&ue($n).pb_togglePlayback(),un=!0)}else xi?On&&On.play():"undefined"!=typeof ue(Sn)&&ue(Sn).pb_play();pn=!0,Ae("off")}return t?void 0:!1}function x(e){if(!We||on)return!1;e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget);var a=e.attr("data-id");return e.closest(".playlistItem").hasClass(an)?!1:(Va=!0,S(),nl.processPlaylistRequest(a),!1)}function I(e){if(!We||on)return!1;if(e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget).attr("class").split(" "),-1!=t.inArray("controls_prev",e))Va=!0,S(),nl.advanceHandler(-1,!0);else if(-1!=t.inArray("controls_toggle",e)){if(!un)return;w()}else if(-1!=t.inArray("controls_next",e))Va=!0,S(),nl.advanceHandler(1,!0);else if(-1!=t.inArray("player_volume",e))isMobile?ul?(ml&&clearTimeout(ml),yl?(pl.css("display","none"),yl=!1):(pl.css("display","block"),yl=!0,ml=setTimeout(bl,gl))):(l(),o()):(l(),o());else if(-1!=t.inArray("player_download",e)){if(!Ni)if(e=Zi){var a=nl.getCounter(),i=yn[a].download,a=De(a,!1);e=Y(e,a,i),V(e.name,e.path)}else ui&&alert("Invalid data-type for file download function! Quitting."),Ni=!1}else-1!=t.inArray("player_loop",e)?(ai?(Sa.find(".player_loop").find("img").attr("src",ha),ai=!1):(Sa.find(".player_loop").find("img").attr("src",ma),ai=!0),nl.setLooping(ai)):-1!=t.inArray("player_shuffle",e)&&(ii?(Sa.find(".player_shuffle").find("img").attr("src",_a),ii=!1):(Sa.find(".player_shuffle").find("img").attr("src",ka),ii=!0),nl.setRandom(ii));return!1}function M(e){return We?(e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget).attr("class").split(" "),-1!=t.inArray("controls_prev",e)?Sa.find(".controls_prev").find("img").attr("src",ra):-1!=t.inArray("controls_toggle",e)?pn?Ae("on"):Me("on"):-1!=t.inArray("controls_next",e)?Sa.find(".controls_next").find("img").attr("src",da):-1!=t.inArray("player_volume",e)?cl>0?Sa.find(".player_volume").find("img").attr("src",ga):Sa.find(".player_volume").find("img").attr("src",va):-1!=t.inArray("player_download",e)?Sa.find(".player_download").find("img").attr("src",Ta):-1!=t.inArray("player_loop",e)?ai?Sa.find(".player_loop").find("img").attr("src",ha):Sa.find(".player_loop").find("img").attr("src",ma):-1!=t.inArray("player_shuffle",e)&&(ii?Sa.find(".player_shuffle").find("img").attr("src",_a):Sa.find(".player_shuffle").find("img").attr("src",ka)),!1):void 0}function A(e){return We?(e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget).attr("class").split(" "),-1!=t.inArray("controls_prev",e)?Sa.find(".controls_prev").find("img").attr("src",oa):-1!=t.inArray("controls_toggle",e)?pn?Ae("off"):Me("off"):-1!=t.inArray("controls_next",e)?Sa.find(".controls_next").find("img").attr("src",sa):-1!=t.inArray("player_volume",e)?cl>0?Sa.find(".player_volume").find("img").attr("src",ya):Sa.find(".player_volume").find("img").attr("src",ba):-1!=t.inArray("player_download",e)?Sa.find(".player_download").find("img").attr("src",Pa):-1!=t.inArray("player_loop",e)?ai?Sa.find(".player_loop").find("img").attr("src",ma):Sa.find(".player_loop").find("img").attr("src",ha):-1!=t.inArray("player_shuffle",e)&&(ii?Sa.find(".player_shuffle").find("img").attr("src",ka):Sa.find(".player_shuffle").find("img").attr("src",_a)),!1):void 0}function S(){if(!Hi&&-1!=nl.getCounter()){var e=t(gn[nl.getCounter()]);if(e&&e.hasClass("playlistSelected")){var a=e.attr("data-id");e.removeClass("playlistSelected").addClass("playlistNonSelected"),"undefined"!=typeof playlistItemEnabled&&playlistItemEnabled(Qe,Ya,e,a)}}}function C(){if(!Hi){var e=t(gn[nl.getCounter()]);if(e&&e.hasClass("playlistNonSelected")){var a=e.attr("data-id");e.removeClass("playlistNonSelected").addClass("playlistSelected"),"undefined"!=typeof playlistItemDisabled&&playlistItemDisabled(Qe,Ya,e,a)}}}function E(){var t=e.activeItem;Se(t)&&-1!=t?(0>t?t=0:t>vn-1&&(t=vn-1),nl.setCounter(t,!1)):Va=!0}function O(){ln&&-1!=nl.getCounter()&&(j(),xe(),S())}function D(){j(),xe();var e,a=0;for(a;vn>a;a++)e=t(gn[a]).unbind("click",x),ki&&!isMobile&&e.unbind("mouseenter").unbind("mouseleave");ln&&(ln.children().each(function(){var e=t(this);e.data("hap_wrap_player")&&e.data("hap_wrap_player").destroyPlaylist()}),ln.empty(),ln=null),ja.empty(),Hi=nn=!1,qi=Ri=$i=null,Ei=Ci=Si=!1,di=null,nl.reSetCounter(),yn=[],gn=[],bn=[],mn&&mn.reinitialise()}function j(){Zn&&(la?Ln&&Ln.stop():"undefined"!=typeof ue($n)&&ue($n).pb_dispose(),Zn=!1),xi?(tn&&clearInterval(tn),On&&(On.pause(),On.src=""),En&&En.unbind("ended pause play canplay canplaythrough loadedmetadata")):"undefined"!=typeof ue(Sn)&&ue(Sn).pb_dispose(),Ie(),qi?za.css("display","block"):za.css("display","none"),Il=null,sn=un=pn=rn=!1,Vi=null}function L(e){if("undefined"==typeof e)return ui&&alert("setPlaylist method requires data parameter. loadPlaylist failed."),!1;if("undefined"==typeof e.hidden)return ui&&alert("setPlaylist method requires data.hidden parameter. loadPlaylist failed."),!1;var a=Ue(e.hidden);if("undefined"==typeof e.id)return ui&&alert("setPlaylist method requires data.id parameter. loadPlaylist failed."),!1;if(e=e.id,on=!0,we(),ja.css("opacity",0),ln&&D(),nn=!1,Hi=a,Oa&&isIE?(a=t(Ua.find(e).css("display","block").clone().wrap("<p>").parent().html()),t(Ua.find(e).css("display","none"))):(a=Ua.find(e).css("display","block").clone(),Ua.find(e).css("display","none")),a.css("fontSize",0),0==a.length)return ui&&alert('Failed to select playlist! Make sure that element: "'+e+'" exist in playlist list! Quitting.'),Te(),!1;if(Hi)Pn.empty(),a.appendTo(Pn),Ai=0,Ei=Ci=Mi=!0,ln=Tn;else{if(!mn&&0==ja.length)return ui&&alert("playlist_inner html element seems to be missing! You could be trying to use loadPlaylist method without having necessary html elements inside componentWrapper. Quitting."),!1;a.appendTo(ja),ln=a}yn=[],gn=[],bn=[],An=[],a.find("li[class*='playlistItem']").each(function(){An.push(t(this))}),N()}function N(){An.length?R():q()}function R(){zi=Bi=Fi=Ri=Di=null,Oi=!1;var e=An[0],a=e.attr("data-type").toLowerCase(),i=e.attr("data-path"),n=e.hasClass(Xi);if(Mn=[],e.hasClass(Wi)&&(Oi=!0),void 0==e.attr("data-plink")||Fe(e.attr("data-plink"))||(Di=e.attr("data-plink")),void 0!=e.attr("data-dlink")&&("youtube_single"==a||"youtube_playlist"==a?Fe(e.attr("data-dlink"))||(Ri=e.attr("data-dlink")):Ri=Fe(e.attr("data-dlink"))?!0:e.attr("data-dlink")),void 0!=e.attr("data-download")&&("youtube_single"==a||"youtube_playlist"==a?Fe(e.attr("data-download"))||(Fi=e.attr("data-download")):Fi=Fe(e.attr("data-download"))?!0:e.attr("data-download")),void 0==e.attr("data-thumb")||Fe(e.attr("data-thumb"))||(Bi=e.attr("data-thumb")),Fe(t.trim(e.html()))||(zi=e.html()),n)$i=e,An.shift(),N();else if("local"==a)$i=e,An.shift(),N();else if("soundcloud"==a)$i=e.data("toremove","true"),Ji=0,fe(i);else if("podcast"==a)$i=e.data("toremove","true"),n="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=xml&num="+Ka+"&callback=?&q="+encodeURIComponent(i),t.ajax({type:"GET",url:n,dataType:"jsonp",cache:!1}).done(function(e){if(null==e.responseData)ui&&alert("Playlist process failed, podcast: "+i),$i&&"true"==$i.data("toremove")&&$i.remove(),An.shift(),N();else{if(ieBelow9){e=Be(e.responseData.xmlString);var a;t(e).find("item").each(function(){a=t(this),o={type:"podcast"},o.mp3=a.find("enclosure").attr("url"),o.ogg="",o.title=a.find("title").text(),0<a.find("media\\:thumbnail").length?a.find("media\\:thumbnail").attr("url")?o.thumb=a.find("media\\:thumbnail").attr("url"):Bi&&(o.thumb=Bi):Bi&&(o.thumb=Bi),Di&&(o.url=Di),Ri&&(o.dlink=Ri),Fi&&(o.download=Fi),Mn.push(o)})}else{_n.html(e.responseData.xmlString),e=_n.get(0).getElementsByTagName("item");var n,l,o,r=0,s=e.length;for(r;s>r;r++)n=e[r],void 0!=n.getElementsByTagName("enclosure")[0]&&(o={type:"podcast"},o.mp3=n.getElementsByTagName("enclosure")[0].getAttribute("url"),o.ogg="",void 0!=n.getElementsByTagName("itunes:duration")[0]&&(l=qe(n.getElementsByTagName("itunes:duration")[0].childNodes[0].nodeValue),o.length=parseInt(1e3*l,10)),void 0!=n.getElementsByTagName("media:thumbnail")[0]?void 0!=n.getElementsByTagName("media:thumbnail")[0].getAttribute("url")?o.thumb=n.getElementsByTagName("media:thumbnail")[0].getAttribute("url"):Bi&&(o.thumb=Bi):Bi&&(o.thumb=Bi),o.title=n.getElementsByTagName("title")[0].childNodes[0].nodeValue,Di&&(o.url=Di),Ri&&(o.dlink=Ri),Fi&&(o.download=Fi),Mn.push(o))}F()}}).fail(function(t){ui&&alert("Parse feed error: "+t.responseText),ui&&alert("Playlist process failed, podcast: "+i),$i&&"true"==$i.data("toremove")&&$i.remove(),An.shift(),N()});else if("folder"==a){$i=e.data("toremove","true");var n=hap_source_path+"folder_parser.php",l=!0;void 0!=e.attr("data-subdirs")&&"false"==e.attr("data-subdirs")&&(l=!1),l={dir:i,subdirs:l},t.ajax({type:"GET",url:n,data:l,dataType:"json"}).done(function(t){Re(t,"title");var e,a,i=0,n=t.length;for(Pi&&(Ii=Mn.length?Mn.length-1:0),i;n>i;i++)if(e=t[i],a=e.path,a=a.replace(/\\'/g,"'"),a=a.replace(/\\"/g,'"'),a=a.replace(/\\0/g,"\x00"),path=a=a.replace(/\\\\/g,"\\"),a={type:"folder"},/.mp3/.test(path)){a.mp3=path,a.ogg=path.substr(0,path.lastIndexOf("."))+".ogg";var l=path.substr(0,path.lastIndexOf("."));title=/\//i.test(l)?l.substr(l.lastIndexOf("/")+1):l,title=title.split("_").join(" "),a.title=title,a.thumb=path.substr(0,path.lastIndexOf("."))+".jpg",a.size=parseInt(e.size,10),a.lastmod=parseInt(e.lastmod,10),Di&&(a.url=Di),Ri&&(a.dlink=Ri),Fi&&(a.download=Fi),Bi&&(a.thumb=Bi),Mn.push(a)}Mn.length&&Pi?he():F()}).fail(function(){ui&&alert("Read folder error! Make sure you run this online or on local server!"),ui&&alert("Playlist process failed, folder: "+i),$i&&"true"==$i.data("toremove")&&$i.remove(),An.shift(),N()})}else if("xml"==a){$i=e;var o,n=hap_source_path+i,r=[];t.ajax({type:"GET",url:n,dataType:"html",cache:!1}).done(function(a){An.shift(),t(a).find("li[class='playlistItem']").each(function(){o=He(t(this)),$i?$i.after(t(o)):0<ln.children().size()?t(o).prependTo(ln):t(o).appendTo(ln),$i=t(o),r.push(t(o))}),a=0;var i=r.length;for(r.reverse(),a;i>a;a++)An.unshift(r[a]);r=null,e.remove(),N()}).fail(function(){ui&&alert("Playlist process failed, xml: "+i),$i&&$i.remove(),An.shift(),N()})}else if("database_data"==a||"database_html"==a)if(void 0==e.attr("data-table")||Fe(e.attr("data-table")))ui&&(alert("Database table missing!"),alert("Playlist process failed, database query: "+i)),An.shift(),N();else{var s=l=null,d=null;void 0==e.attr("data-limit")||Fe(e.attr("data-limit"))||(l=parseInt(e.attr("data-limit"),10)),void 0==e.attr("data-range")||Fe(e.attr("data-range"))||(n=e.attr("data-range").split(","),2==n.length&&(s=n[0],d=n[1])),$i=e,n=hap_source_path+"includes/database.php",r=[],l={db_name:i,db_table:e.attr("data-table"),db_type:a,limit:l,range_from:s,range_to:d},t.ajax({type:"POST",url:n,data:l}).done(function(n){if(-1<n.indexOf("Database information missing!")||-1<n.indexOf("Db connection failed")||-1<n.indexOf("Db selection failed")||-1<n.indexOf("Db query failed"))ui&&(alert(n),alert("Playlist process failed, database query: "+i)),$i&&$i.remove(),An.shift();else{An.shift(),n=t.parseJSON(n);var l,s=0,d=n.length;for(s;d>s;s++){if(l=n[s],"database_data"==a){if(!(l.type&&l.mp3||l.path))continue;o=Ve(l)}else{if(!l.path)continue;o=He(l.path)}$i?$i.after(t(o)):0<ln.children().size()?t(o).prependTo(ln):t(o).appendTo(ln),$i=t(o),r.push(t(o))}for(s=0,d=r.length,r.reverse(),s;d>s;s++)An.unshift(r[s]);r=null,e.remove()}N()}).fail(function(){ui&&alert("Playlist process failed, database query: "+i),$i&&$i.remove(),An.shift(),N()})}else"youtube_single"==a?(Fn=i,youtube_path="http://gdata.youtube.com/feeds/api/videos/"+i+"?v=2&format=5&alt=jsonc",$i=e.data("toremove","true"),Z(a,youtube_path)):"youtube_playlist"==a?(i.substr(0,2).toUpperCase(),Rn=i,Nn=1,youtube_path="http://gdata.youtube.com/feeds/api/playlists/"+Rn+"?start-index="+Nn+"&max-results=50&v=2&format=5&alt=jsonc",$i=e.data("toremove","true"),Z(a,youtube_path)):"ofm_single"==a?($i=e.data("toremove","true"),il=[],il.push({id:i,type:a}),G()):"ofm_playlist"==a||"ofm_project"==a?($i=e.data("toremove","true"),Un=a,Yn=i,il=[],Vn=1,J()):(ui&&alert("Invalid playlist data-type attribute!"),An.shift(),N())}function F(){if(Mn.length){var e,a,i,n,l=0,o=Mn.length;for(l;o>l;l++)i=Mn[l],e=t('<li class="playlistItem" data-type="'+i.type+'"data-mp3="'+i.mp3+'" data-ogg="'+i.ogg+'" data-thumb="'+i.thumb+'"></li>'),n=i.mp3,/\.(mp3)$/i.test(i.mp3)||(n+=".mp3"),Oi&&e.addClass(Wi),i.url&&e.attr("data-plink",i.url),i.dlink&&(1!=i.dlink&&"true"!=i.dlink?e.attr("data-dlink",i.dlink):e.attr("data-dlink",n)),i.download&&(1!=i.download&&"true"!=i.download?e.attr("data-download",i.download):e.attr("data-download",n)),i.title&&e.attr("data-title",i.title),i.thumb&&("//"==i.thumb.substr(0,2)&&(i.thumb="http:"+i.thumb),e.attr("data-thumb",i.thumb)),i.length&&e.attr("data-length",i.length),"title"==bi?a=t('<a class="playlistNonSelected" href="#">'+i.title+"</a>").appendTo(e):"thumb"==bi?a=t('<a class="playlistNonSelected" href="#"><img src="'+i.thumb+'" alt="thumb"/></a>').appendTo(e):"all"==bi&&(a=t('<a class="playlistNonSelected" href="#"></a>').appendTo(e),t('<span class="hap_thumb"><img src="'+i.thumb+'" alt="thumb"/></span>').appendTo(a),t('<span class="hap_title"><p>'+i.title+"</p></span>").appendTo(a)),zi&&a.after(zi),$i?($i.after(e),"true"==$i.data("toremove")&&$i.remove()):e.appendTo(ln),$i=e}An.shift(),N()}function q(){if(Si||Ci){var e=0;$i=null;var a;Pn.find("li[class*='playlistItem']").each(function(){a=t(this),$i?$i.after(a):Mi?a.appendTo(ln):ln.children().eq(Ai).before(a),$i=a,e++}),Pn.empty()}if(B(),ja.css("opacity",1),We||z(),$i=null,on=!1,Te(),vn>0){if(Si||Ci){var i=nl.getCounter();nl.setPlaylistItems(vn,!1),i>=Ai&&(Mi||nl.reSetCounter(i+e)),Ei&&(Ei=!1,E())}else nl.setPlaylistItems(vn),E();ei&&Oe()}Ci=Si=!1,0==vn&&"undefined"!=typeof playlistEmpty&&playlistEmpty(Qe,Ya),"undefined"!=typeof audioPlayerPlaylistLoaded&&audioPlayerPlaylistLoaded(Qe,Ya),nn=!0}function B(){if(yn=[],bn=[],gn=[],0==ln.length)return ui&&alert("lastPlaylist html element seems to be missing! You could be trying to use addTrack method without having necessary html elements inside componentWrapper. Quitting."),!1;var e,a,i,n,l,o,r,s,d,u,f,c,p=0,h=ln.find("li"),m=h.length;for(Gi=0,p;m>p;p++)a=t(h[p]).addClass(Xi),bn.push(a),Qi&&a.addClass(an),Gi="horizontal"==ci?Gi+a.outerWidth(!0):Gi+a.outerHeight(!0),e=a.find("a[class=playlistNonSelected]"),0==e.length&&(e=a.find("a[class=playlistSelected]")),e.unbind().bind("click",x).attr("data-id",p),gn.push(e),ki&&!isMobile&&e.bind("mouseenter",function(e){if(!We||on)return!1;e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget).attr("data-id");var a=t(gn[e]),i=!1;return nl.getCounter()==e&&(i=!0),"undefined"!=typeof playlistItemRollover&&playlistItemRollover(Qe,Ya,a,e,i),!1}).bind("mouseleave",function(e){if(!We||on)return!1;e||(e=window.event),e.cancelBubble?e.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),e=t(e.currentTarget).attr("data-id");var a=t(gn[e]),i=!1;return nl.getCounter()==e&&(i=!0),"undefined"!=typeof playlistItemRollout&&playlistItemRollout(Qe,Ya,a,e,i),!1}),i="",void 0!=a.attr("data-title")?i=a.attr("data-title"):"title"==bi?i=e.html():"thumb"!=bi&&"all"==bi&&(i=e.find("span[class=hap_title]").find("p").html()),ri&&(n=je(p)+si+i,e.html(n)),a=t(bn[p]).attr({"data-id":p,"data-title":i}),l=n=s=r="",o=void 0,c=f=u=d=null,void 0!=a.attr("data-mp3")&&(r=a.attr("data-mp3")),void 0!=a.attr("data-ogg")&&(s=a.attr("data-ogg")),void 0!=a.attr("data-type")&&(n=a.attr("data-type")),void 0!=a.attr("data-origtype")&&(l=a.attr("data-origtype")),void 0==a.attr("data-length")||Fe(a.attr("data-length"))||(o=a.attr("data-length")),"youtube_single"==n||"youtube_playlist"==n?(void 0==a.attr("data-download")||Fe(a.attr("data-download"))||(d=a.attr("data-download")),void 0==a.attr("data-dlink")||Fe(a.attr("data-dlink"))||(u=a.attr("data-dlink"))):(void 0!=a.attr("data-download")&&(d=Fe(a.attr("data-download"))||"true"==a.attr("data-download")?r:a.attr("data-download")),void 0!=a.attr("data-dlink")&&(u=Fe(a.attr("data-dlink"))||"true"==a.attr("data-dlink")?r:a.attr("data-dlink"))),void 0==a.attr("data-plink")||Fe(a.attr("data-plink"))||(f=a.attr("data-plink")),void 0==a.attr("data-thumb")||Fe(a.attr("data-thumb"))||(c=a.attr("data-thumb")),Hi||(f&&0==a.find("a[class=plink]").length&&(f=t('<a class="plink" href="'+f+'" target="_blank"><img src="'+wa+'" alt="purchase"/></a>'),e.after(f)),u&&0==a.find("a[class=dlink]").length&&(u=t('<a class="dlink" href="#" data-dlink="'+u+'"><img src="'+xa+'" alt="download"/></a>'),e.after(u),Fe(a.attr("data-dlink"))),mi&&0==a.find("a[class=premove]").length&&(a=t('<a class="premove" href="#"><img src="'+Ia+'" alt="remove"/></a>'),e.after(a))),yn.push({id:p,type:n,origtype:l,title:i,mp3:r,ogg:s,length:o,download:d,thumb:c});return h=null,vn=yn.length,Hi||(U(),pi&&Da.length&&!ln.hasClass("ui-sortable")&&(ln.bind("sortstart",function(t,e){e.helper.css("margin-top",Ke.scrollTop())}),ln.bind("sortbeforestop",function(t,e){e.helper.css("margin-top",0)}),ln.sortable({cursor:"move",update:function(){B(),vn>0&&nl.setPlaylistItems(vn);var t=ja.find("a[class=playlistSelected]").attr("data-id");t&&(nl.reSetCounter(t),ei&&Oe()),1==vn&&E()},receive:function(){"undefined"!=typeof dropReceive&&dropReceive(Qe,Ya)}})),fi&&("horizontal"==ci&&ja.width(Gi),P(!0))),!0}function z(){We=!0,on=!1,Te(),Pe(),"undefined"!=typeof audioPlayerSetupDone&&audioPlayerSetupDone(Qe,Ya)}function U(){var e=ll?ol:"click";Sa.find("a[class=dlink]").unbind().bind(e,function(e){if(e.preventDefault(),Ni)return!1;var a=t(this),i=a.closest(".playlistItem"),n=i.attr("data-id");return i.hasClass(an)?!1:void 0==i.attr("data-type")||Fe(i.attr("data-type"))?(ui&&alert("Invalid data-type for file download function! Quitting."),Ni=!1):(e=i.attr("data-type"),void 0==i.attr("data-origtype")||Fe(i.attr("data-origtype"))||(e=i.attr("data-origtype")),void 0==a.attr("data-dlink")||Fe(a.attr("data-dlink"))||(a=a.attr("data-dlink"),n=De(n,!1),e=Y(e,n,a),V(e.name,e.path)),void 0)}),Sa.find("a[class=plink]").unbind().bind("click",function(){return t(this).closest(".playlistItem").hasClass(an)?!1:void 0}),mi&&Sa.find("a[class=premove]").unbind().bind("click",function(e){e.preventDefault(),e=t(this).closest(".playlistItem");var a=parseInt(e.attr("data-id"),10);return e.hasClass(an)?!1:(Qe.removeTrack(a),void 0)})}function Y(t,e,a){return"local"==t||"folder"==t?(a.indexOf("\\")&&(a=a.replace(/\\/g,"/")),a.match(/^http([s]?):\/\/.*/)||(t=window.location.href,t=t.substr(0,t.lastIndexOf("/")+1),/^\.\.\//i.test(a)&&(a=a.substr(3),"/"==t.charAt(t.length-1)&&(t=t.substr(0,t.lastIndexOf("/"))),t=t.substr(0,t.lastIndexOf("/")+1)),a=t+a),Ze||(e=0<a.lastIndexOf("/")?a.substr(a.lastIndexOf("/")+1):a)):"soundcloud"==t&&(a=a.replace(/\/stream\\?/,"/download").replace(/\.mp3/,"")),e=e.replace(/[^A-Z0-9\-\_\.]+/gi,"_"),/\.(mp3)$/i.test(e)||(e+=".mp3"),{name:e,path:a}}function V(t,e){if(Ze)if(Ni=!0,hi)ji||(Li=W())&&(ji=!0),Li?H(Li,t,e):Ni=!1;else{var a=W();a?H(a,t,e):Ni=!1}else kn.attr("src",hap_source_path+"dl.php?path="+e+"&name="+t)}function H(e,a,i){t.ajax({type:"POST",url:hap_source_path+"mail.php",data:"mail="+e+"&name="+a+"&path="+i}).done(function(){Ni=!1}).fail(function(t){ui&&alert("Send email error: "+t.responseText),X(),Ni=!1}),In.css({marginTop:-In.height()/2+"px",display:"block"}).stop().animate({opacity:1},{duration:500}),wn&&clearTimeout(wn),wn=setTimeout(X,xn)}function X(){wn&&clearTimeout(wn),In.stop().animate({opacity:0},{duration:500,complete:function(){In.css("display","none")}})}function W(){for(var t=prompt("Please enter your email address where download link will be sent:"),e=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;(!e.test(t)||Fe(t))&&null!=t;)t=prompt("Please enter a valid email address:");return t}function Q(){t(".hap_text_link").each(function(){var e=t(this),a=e.attr("href");"undefined"!=typeof a&&!1!==a&&-1<a.toLowerCase().indexOf(".mp3")&&e.prepend('<img class="play_link" src="'+Aa+'"/>')}),t(".hap_text_link, .hap_image_link").click(function(e){if(!We||on)return!1;e=t(this);var a=e.attr("href");return"undefined"==typeof a||!1===a?!1:Vi&&Vi==a?w():(S(),nl.reSetCounter(),Vi=a,Ui=e,Yi&&Yi.attr("src",Aa),e.hasClass("hap_text_link")&&(Yi=e.find("img").attr("src",Ma)),fn=Vi,cn=fn.substr(0,fn.lastIndexOf("."))+".ogg",Va=!0,xi||"undefined"!=typeof ue(Sn)&&ue(Sn).pb_setAutoplay(!0),j(),_e(),!1)})}function G(){il.length?$(il.shift()):(0==Mn.length&&$i&&"true"==$i.data("toremove")&&$i.remove(),Mn.length>Za&&(Mn=Mn.slice(0,Za)),F())}function $(e){var a=e.id,i=e.type;t.ajax({url:"http://api.official.fm/tracks/"+a+"?fields=streaming,cover&api_version=2",dataType:"json",cache:!1}).done(function(t){var e,a,n={};t.track&&t.track.streaming&&t.track.streaming.http&&(t=t.track,n.type=i,n.length=t.duration?t.duration:null,n.mp3=t.streaming.http,n.ogg=t.streaming.http,e=t.artist?t.artist:"Official Fm artist",a=t.title?t.title:"Official Fm track",n.title=e+" - "+a,Di&&(n.url=Di),Ri&&(n.dlink=Ri),Fi&&(n.download=Fi),t.cover.urls.small?n.thumb=t.cover.urls.small:Bi&&(n.thumb=Bi),Mn.push(n)),G()}).fail(function(){ui&&alert("Playlist process failed, ofm: "+a),G()})}function K(){Hn>1?(Vn+=1,Hn>=Vn&&il.length<Za?J():il.length?G():(An.shift(),N())):il.length?G():(0==Mn.length&&$i&&"true"==$i.data("toremove")&&$i.remove(),An.shift(),N())}function J(){t.ajax({url:"ofm_playlist"==Un?"http://api.official.fm/playlists/"+Yn+"/tracks?api_version=2&page="+Vn:"http://api.official.fm/projects/"+Yn+"/tracks?fields=cover&api_version=2&page="+Vn,dataType:"json",cache:!1}).done(function(t){if(Hn=t.total_pages,t.tracks&&t.tracks.length){var e,a=0,i=t.tracks.length;for(i>Za&&(i=Za),a;i>a;a++)e=t.tracks[a].track,e.url&&(e=e.url.substr(e.url.lastIndexOf("/")+1),e=e.substr(0,e.indexOf("?")),il.push({id:e,type:Un}))}K()}).fail(function(){ui&&alert("Playlist process failed, ofm: "+Yn),K()})}function Z(e,a){t.ajax({url:a,dataType:"jsonp",success:function(t){if("youtube_single"==e){var a={};(t=t.data)?t.accessControl?(a.type="youtube_single",a.mp3=t.id,a.ogg="",a.title=t.title?t.title:"",a.description=t.description?t.description:"",t.thumbnail?a.thumb=t.thumbnail.hqDefault?t.thumbnail.hqDefault:t.thumbnail.sqDefault:Bi&&(a.thumb=Bi),Di&&(a.url=Di),Ri&&(a.dlink=Ri),Fi&&(a.download=Fi),Mn.push(a),F()):(An.shift(),N()):(ui&&alert("Playlist process failed, youtube single: "+Fn),$i&&"true"==$i.data("toremove")&&$i.remove(),An.shift(),N())}else if(t.error)ui&&alert("Playlist process failed, youtube playlist: "+Rn),$i&&"true"==$i.data("toremove")&&$i.remove(),An.shift(),N();else if(t.data.items){var i,a=t.data.items.length,n=0;for(n;a>n;n++)a>Ja&&(a=Ja),(i=t.data.items[n].video)&&i.accessControl&&(obj={type:"youtube_playlist"},obj.mp3=i.id,obj.ogg="",obj.title=i.title?i.title:"",obj.description=i.description?i.description:"",i.thumbnail?obj.thumb=i.thumbnail.hqDefault?i.thumbnail.hqDefault:i.thumbnail.sqDefault:Bi&&(obj.thumb=Bi),Di&&(obj.url=Di),Ri&&(obj.dlink=Ri),Fi&&(obj.download=Fi),Mn.push(obj));Ja>=Nn?(Nn+=Wn,t="http://gdata.youtube.com/feeds/api/playlists/"+Rn+"?start-index="+Nn+"&max-results=50&v=2&format=5&alt=jsonc",Z("youtube_playlist",t)):(Mn.length>Ja&&(Mn=Mn.slice(0,Ja)),F())}else Mn.length>Ja&&(Mn=Mn.slice(0,Ja)),F()},error:function(){ui&&alert("Playlist process failed, youtube: "+a),$i&&"true"==$i.data("toremove")&&$i.remove(),An.shift(),N()}})}function te(){Qn?isMobile?el?Ln.initVideo(fn):(We=!1,al=!0,ee("on")):Ln.initVideo(fn):(qn=0==Sa.find("div[class='youtubeIframeMain']").length?t("<div/>").css({display:"block",left:"-10000px"}).addClass("youtubeIframeMain").appendTo(Sa):Sa.find("div[class='youtubeIframeMain']"),Ln=t.youtubePlayer({parent:Qe,autoPlay:Xa,defaultVolume:cl,mediaPath:fn,youtubeHolder:qn,youtubeChromeless:Gn,isMobile:isMobile,initialAutoplay:Ha,quality:Kn}),t(Ln).bind("ap_YoutubePlayer.YT_READY",function(){zn||qn.css("left","-10000px"),tl=!0}),t(Ln).bind("ap_YoutubePlayer.START_PLAY",function(){tn&&clearInterval(tn),tn=setInterval(me,hn),al&&(Ln.stop(),Ln.initVideo(fn),al=!1),!el&&isMobile&&(ee("off"),We=el=!0)}),t(Ln).bind("ap_YoutubePlayer.END_PLAY",function(){ge()}),t(Ln).bind("ap_YoutubePlayer.STATE_PLAYING",function(){be()}),t(Ln).bind("ap_YoutubePlayer.STATE_PAUSED",function(){isMobile?"iPhone"==$e||"iPod"==$e?pn&&(pn=!1,Me("off")):ve():ve()}),Qn=!0),un=Zn=!0}function ee(t){"on"==t?(zn=!0,qn.css({top:"0px",left:"0px"})):(qn.css("left","-10000px"),zn=null)}function ae(){var t=$n.substr(1);embedFlashMain(t),t=Sn.substr(1),embedFlashAudio(t),"undefined"!=typeof ue($n)?Bn=setInterval(ie,Jn):(ui&&alert("Problems with flash initialization (startFlashInit)! Flash for youtube not initialized! Sound_id: "+Ya),ne())}function ie(){void 0!=ue($n).setData&&(Bn&&clearInterval(Bn),ue($n).setData(e),Sa.find(".flashMain").css("left","-10000px"),ne())}function ne(){"undefined"!=typeof ue(Sn)?Bn=setInterval(oe,Jn):(ui&&alert("Problems with flash initialization (checkFlashSound)! Flash audio backup not initialized! Sound_id: "+Ya),se())}function le(){var t=Sn.substr(1);embedFlashAudio(t);var e=setTimeout(function(){e&&clearTimeout(e),"undefined"!=typeof ue(Sn)?Bn=setInterval(re,Jn):(ui&&alert("Problems with flash initialization (checkFlashSound_b)! Flash audio backup not initialized! Sound_id: "+Ya),ke())},500)}function oe(){void 0!=ue(Sn).setData&&(Bn&&clearInterval(Bn),ue(Sn).setData(e),Sa.find(".flashAudio").css("left","-10000px"),se())
}function re(){void 0!=ue(Sn).setData&&(Bn&&clearInterval(Bn),ue(Sn).setData(e),Sa.find(".flashAudio").css("left","-10000px"),ke())}function se(){if(Ca){var e=Cn.substr(1);embedFlashCircle(e),"undefined"!=typeof ue(Cn)?Bn=setInterval(de,Jn):(ui&&alert("Problems with flash initialization (checkFlashCircle)! Flash circle backup (canvas support is false) not initialized! Sound_id: "+Ya),ke())}else t(".circleMain").remove(),ke()}function de(){void 0!=ue(Cn).setData&&(Bn&&clearInterval(Bn),ue(Cn).setData(ql),ke())}function ue(t){return"#"==t.charAt(0)&&(t=t.substr(1)),-1!=navigator.appName.indexOf("Microsoft")?window[t]:document[t]}function fe(e){if(Fe(Ga))return alert("soundcloudApiKey has not been set! Skipping Soundcloud url."),An.shift(),N(),!1;/\/likes$/.test(e)&&(e=e.replace(/\/likes$/,"/favorites"));var a=pe(e,Ga);t.ajax({url:a,dataType:"jsonp",cache:!1}).done(function(a){var i,n;if(a.tracks){for(i=a.tracks.length,i>$a&&(i=$a),n=0;i>n;n++)a.tracks[n].streamable&&a.tracks[n].stream_url?Mn.push(ce(a.tracks[n])):(i+=1,i>a.tracks.length&&(i=a.tracks.length));Mn.length>$a&&(Mn=Mn.slice(0,$a)),F()}else if(a.duration)a.permalink_url=e,a.streamable&&a.stream_url&&Mn.push(ce(a)),Mn.length>$a&&(Mn=Mn.slice(0,$a)),F();else if(a.username)Ki=/likes/.test(e)?a.uri+"/likes":/favorites/.test(e)?a.uri+"/favorites":a.uri+"/tracks",fe(Ki);else if(t.isArray(a)){for(i=a.length,i>$a&&(i=$a),n=0;i>n;n++)a[n].streamable&&a[n].stream_url?Mn.push(ce(a[n])):(i+=1,i>a.length&&(i=a.length));i==dn?(Ji+=dn,$a>Ji?fe(Ki):(Mn.length>$a&&(Mn=Mn.slice(0,$a)),F())):(Mn.length>$a&&(Mn=Mn.slice(0,$a)),F())}else a.kind&&"group"==a.kind?(Ki=a.uri+"/tracks",fe(Ki)):(An.shift(),N())}).fail(function(){ui&&alert("Playlist process failed, soundcloud: "+e),An.shift(),N()})}function ce(t){var e={type:"soundcloud"};return t.duration&&(e.length=t.duration),e.mp3=t.stream_url+(/\?/.test(t.stream_url)?"&":"?")+"consumer_key="+Ga,e.ogg="",e.title=t.title,Di&&(e.url=Di),t.downloadable&&t.download_url?(Ri&&(e.dlink=Ri),Fi&&(e.download=Fi)):(Ri&&1!=Ri&&"true"!=Ri&&(e.dlink=Ri),Fi&&1!=Fi&&"true"!=Fi&&(e.download=Fi)),t.artwork_url?e.thumb=t.artwork_url:Bi&&(e.thumb=Bi),e}function pe(t,e){return(/api\./.test(t)?t+"?":"http://api.soundcloud.com/resolve?url="+t+"&")+"format=json&offset="+Ji+"&consumer_key="+e+"&callback=?"}function he(){var t=Mn[Ii].mp3+"?rand="+99999999*Math.random();ID3.loadTags(t,function(){var e=ID3.getAllTags(t);if(e.title&&(Mn[Ii].title=e.title),e.artist&&(Mn[Ii].artist=e.artist),e.album&&(Mn[Ii].album=e.album),e=e.picture){var a="",i=0,n=e.data.length;for(i;n>i;i++)a+=String.fromCharCode(e.data[i]);Mn[Ii].thumb="data:"+e.format+";base64,"+_win.btoa(a)}Ii++,Ii<Mn.length?he():F()},{tags:["title","artist","album","picture"],onError:function(){}})}function me(){if(la){var t=Ln.getCurrentTime(),e=Ln.getDuration();en=Ln.getVideoBytesLoaded()/Ln.getVideoBytesTotal(),Se(t)&&Se(e)?(rn=!1,La.html(Ce(t)+ni),Na.html(Ee(e)),Ca?Ea&&(Se(en)&&v(en),to=t/e,!Ml&&pn&&(Dl||b(t/e))):(Se(en)&&Sl.width(en*Ol),Ml||Cl.width(t/e*Ol))):rn=!0}}function ye(){var t=On.currentTime,e=On.duration;if(void 0!=On.buffered&&0!=On.buffered.length&&Se(e)&&(en=On.buffered.end(0)/e),Se(t)&&Se(e)&&(La&&La.html(Ce(t)+ni),Na&&Na.html(Ee(e))),Ca)Ea&&(Se(en)&&v(en),Se(t)&&Se(e)&&(to=t/e,!Ml&&pn&&b(t/e)));else{if(Se(en)){var a=en*Ol;a>Ol&&(a=Ol),Sl&&Sl.width(a)}Se(t)&&Se(e)&&!Ml&&Cl&&Cl.width(t/e*Ol)}}function ge(){"undefined"!=typeof audioPlayerSoundEnd&&audioPlayerSoundEnd(Qe,Ya,nl.getCounter()),S(),nl.advanceHandler(1,!0)}function be(){sn||("undefined"!=typeof audioPlayerSoundStart&&audioPlayerSoundStart(Qe,Ya,nl.getCounter()),sn=!0),"undefined"!=typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(Qe,Ya,nl.getCounter()),Ca&&Ea&&_()}function ve(){"undefined"!=typeof audioPlayerSoundPause&&audioPlayerSoundPause(Qe,Ya,nl.getCounter())}function _e(){if("youtube_single"==Zi||"youtube_playlist"==Zi)la?(te(),isMobile&&!el&&Va&&(We=!1,ee("on"))):("undefined"!=typeof ue($n)&&(ue($n).pb_play(fn,0,100,100,"youtube",Va),un=!0),Zn=tl=!0);else if(xi){if(!Dn){var t="",t=Wa?t+'<audio class="hap_audio_cont" preload="auto">':t+'<audio class="hap_audio_cont" preload="none">';jn.html(t+"</audio>"),En=jn.find(".hap_audio_cont"),On=En[0],On.volume=cl,Dn=!0}ea?On.src=fn:aa&&(On.src=cn),Va&&(On.load(),On.play()),En.bind("ended",function(){ge()}).bind("pause",function(){ve()}).bind("play",function(){tn&&clearInterval(tn),tn=setInterval(ye,hn),be()}).bind("canplay",function(){Il&&(On.seekable&&0<On.seekable.length&&(On.currentTime=Il*On.duration),Il=null)}).bind("canplaythrough",function(){}).bind("loadedmetadata",function(){}).bind("error",function(){}).bind("abort",function(){}).bind("stalled",function(){}).bind("suspend",function(){}),tn&&clearInterval(tn),tn=setInterval(ye,hn)}else"undefined"!=typeof ue(Sn)&&ue(Sn).pb_initAudio(fn);Va?(pn=!0,Ae("off")):(pn=!1,Me("off")),o(),"youtube_single"!=Zi&&"youtube_playlist"!=Zi&&(un=!0),Va=!0,!isMobile&&Ln&&Ln.setAutoPlay(!0)}function ke(){var e,a=[Sa.find(".controls_next"),Sa.find(".controls_prev"),Sa.find(".controls_toggle"),Sa.find(".player_volume"),Sa.find(".player_download"),Sa.find(".player_loop"),Sa.find(".player_shuffle")],i=a.length,n=0;for(n;i>n;n++)e=t(a[n]).css("cursor","pointer").bind(ol,I),_i&&!isMobile&&e.bind("mouseover",M).bind("mouseout",A);Q(),di?L(di):We||z()}function Pe(){if(!Ca&&(Ol=Al.width(),Se(en)&&Sl&&Sl.width(en*Ol),!Ml&&Cl)){var t,e;if("youtube_single"!=Zi&&"youtube_playlist"!=Zi){if(xi)On&&(t=On.currentTime,e=On.duration);else if("undefined"!=typeof ue(Sn))try{t=ue(Sn).pb_getFlashPosition,e=ue(Sn).pb_getFlashDuration()}catch(a){}try{t&&Se(t)&&e&&Se(e)&&Cl.width(t/e*Ol)}catch(i){}}}fi&&!Hi&&P(),ti&&Xn&&Xn.checkSize()}function Te(){Ba.css("display","none")}function we(){Ba.css("display","block")}function xe(){tn&&clearInterval(tn),ti&&Xn&&Xn.deactivate(),Fa.html(oi),La.html(Ti+ni),Na.html(wi),Ca?Ea&&(to=0,Vl.clearRect(0,0,Ql,Gl),Hl.clearRect(0,0,Ql,Gl)):(Cl.width(0),Sl.width(0)),Me("off"),za.css("display","none")}function Ie(){tn&&clearInterval(tn),ei||(ti&&Xn&&Xn.deactivate(),Fa.html(oi)),La.html(Ti+ni),Na.html(wi),Ca?Ea&&(to=0,Vl.clearRect(0,0,Ql,Gl),Hl.clearRect(0,0,Ql,Gl)):(Cl.width(0),Sl.width(0)),Me("off"),za.css("display","none")}function Me(t){"on"==t?Sa.find(".controls_toggle").find("img").attr("src",fa):Sa.find(".controls_toggle").find("img").attr("src",ua),Yi&&Yi.hasClass("play_link")&&Yi.attr("src",Aa),Ca&&(Ea?(Vl.clearRect(0,0,Ql,Gl),b(to),_()):"undefined"!=typeof ue(Cn)&&ue(Cn).pb_toggle_icon("play"))}function Ae(t){"on"==t?Sa.find(".controls_toggle").find("img").attr("src",pa):Sa.find(".controls_toggle").find("img").attr("src",ca),Yi&&Yi.hasClass("play_link")&&Ui.hasClass("hap_text_link")&&Yi.attr("src",Ma),Ca&&(Ea?(Vl.clearRect(0,0,Ql,Gl),b(to),_()):"undefined"!=typeof ue(Cn)&&ue(Cn).pb_toggle_icon("pause"))}function Se(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Ce(t){return t=Math.round(t),minutes=Math.floor(t/60),minutes=minutes>=10?minutes:"0"+minutes,t=Math.floor(t%60),minutes+":"+(t>=10?t:"0"+t)}function Ee(t){return t=Math.round(t),minutes=Math.floor(t/60),minutes=minutes>=10?minutes:"0"+minutes,t=Math.floor(t%60),minutes+":"+(t>=10?t:"0"+t)}function Oe(t){if("string"==typeof t){if(ri&&nl&&-1!=nl.getCounter()){var e=nl.getCounter();t=je(yn[e].id)+si+t}}else{if("number"==typeof t){if(!nl||0>t||t>vn-1)return!1}else if(!nl)return!1;e=nl.getCounter(),t=De(e)}ti&&Xn?(Xn.input(t),Xn.activate()):Fa&&Fa.html(t)}function De(t,e){return("undefined"==typeof e||null===e)&&(e=!0),yn[t]&&yn[t].title&&!Fe(yn[t].title)?e?ri?je(yn[t].id)+si+yn[t].title:yn[t].title:yn[t].title:oi}function je(t){return 9>t?"0"+(t+1):t+1}function Le(t){var e=[],a=[],i=0;for(i;t>i;i++)e[i]=i;var n,i=0;for(i;t>i;i++)n=Math.round(Math.random()*(e.length-1)),a[i]=e[n],e.splice(n,1);return a}function Ne(t){var e=[],a=0;for(a;t>a;a++)e[a]=a;return e}function Re(t,e,a){"title"==e?t.sort(function(t,e){return t.title==e.title?0:t.title<e.title?-1:1}):"type"==e&&t.sort(function(t,e){return t.type==e.type?0:t.type<e.type?-1:1}),a&&t.reverse()}function Fe(t){return t?0==t.replace(/^\s+|\s+$/g,"").length:!0}function qe(t){t=t.split(":");for(var e=0,a=1;0<t.length;)e+=a*parseInt(t.pop()),a*=60;return e}function Be(t){if(window.ActiveXObject&&window.GetObject){var e=new ActiveXObject("Microsoft.XMLDOM");return e.loadXML(t),e}if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");throw Error("No XML parser available")}function ze(t,e){return e-t}function Ue(t){if("string"==typeof t)switch(t.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(t)}else if("boolean"==typeof t)return Boolean(t)}function Ye(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}function Ve(e){var a,i,n,l,o,r,s="",d="",u="",f="";return a=e.type.toLowerCase(),e.origtype&&(s=e.origtype.toLowerCase()),e.mp3?i=e.mp3:e.path&&(i=e.path),e.ogg&&(d=e.ogg),e.title&&(u=e.title),e.thumb&&(f=e.thumb),e.download&&("youtube_single"==a||"youtube_playlist"==a?1==e.download||"true"==e.download||Fe(e.download)||(n=e.download):n=1==e.download?i:e.download),e.url&&(o=e.url),e.dlink&&("youtube_single"==a||"youtube_playlist"==a?1==e.dlink||"true"==e.dlink||Fe(e.dlink)||(l=e.dlink):l=1==e.dlink?i:e.dlink),"local"==a?"title"==bi?r="<li class= 'playlistItem' data-type='local' data-origtype='"+s+"' data-mp3='"+i+"' data-ogg='"+d+"' data-thumb='"+f+"' data-title='"+u+"'><a class='playlistNonSelected' href='#'>"+u+"</a></li>":"thumb"==bi?r="<li class= 'playlistItem' data-type='local' data-origtype='"+s+"' data-mp3='"+i+"' data-ogg='"+d+"' data-thumb='"+f+"' data-title='"+u+"'><a class='playlistNonSelected' href='#'><img src='"+f+"' alt='thumb'/></a></li>":"all"==bi&&(r="<li class= 'playlistItem' data-type='local' data-origtype='"+s+"' data-mp3='"+i+"' data-ogg='"+d+"' data-thumb='"+f+"' data-title='"+u+"'><a class='playlistNonSelected' href='#'><span class='hap_thumb'><img src='"+f+"' alt='thumb'/></span><span class='hap_title'><p>'"+u+"'</p></span></a></li>"):(r="<li class= 'playlistItem' data-type='"+a+"' data-path='"+i+"' data-thumb='"+f+"'></li>","database_data"==a&&(i=e.table?e.table:null,s=e.limit?e.limit:null,e=e.range?e.range:null,i&&(i=' data-table="'+i+'" ',d=r.match(/\>/),r=r.slice(0,d.index)+i+r.slice(d.index)),s&&(i=' data-limit="'+s+'" ',d=r.match(/\>/),r=r.slice(0,d.index)+i+r.slice(d.index)),e&&(i=' data-range="'+e+'" ',d=r.match(/\>/),r=r.slice(0,d.index)+i+r.slice(d.index)))),n&&(i=' data-download="'+n+'" ',d=r.match(/\>/),r=r.slice(0,d.index)+i+r.slice(d.index)),"local"==a?(l&&(i="<a class='dlink' href='#' data-dlink='"+l+"'><img src='"+xa+"' alt='download'/></a>",d=r.match(/\<\/a\>\<\/li\>/),r=r.slice(0,d.index)+i+r.slice(d.index)),o&&(i="<a class='plink' href='"+o+"' target='_blank'><img src='"+wa+"' alt='purchase'/></a>",d=r.match(/\<\/a\>\<\/li\>/),r=r.slice(0,d.index)+i+r.slice(d.index))):(l&&(i=' data-dlink="'+l+'" ',d=r.match(/\>/),r=r.slice(0,d.index)+i+r.slice(d.index)),o&&(i=' data-plink="'+o+'" ',d=r.match(/\>/),r=r.slice(0,d.index)+i+r.slice(d.index))),a=document.createElement("ul"),a.innerHTML=r,t(a.firstChild)}function He(e){e=t(e);var a;return e=t("<div>").append(e.clone()).html(),a=document.createElement("ul"),a.innerHTML=e,t(a.firstChild)}function Xe(t){if(vn=yn.length,vn>0){B();var e=nl.getCounter();t==e?(O(),nl.setPlaylistItems(vn)):(nl.setPlaylistItems(vn,!1),e>t&&nl.reSetCounter(nl.getCounter()-1)),ei&&Oe()}else D(),di=null,"undefined"!=typeof playlistEmpty&&playlistEmpty(Qe,Ya)}var We=!1,Qe=this;t("body");var Ge,$e,Ke=t(window),Je=t(document),Ze=!1,ta=navigator.userAgent;(-1<ta.indexOf("iPhone")||-1<ta.indexOf("iPod")||-1<ta.indexOf("iPad"))&&(Ze=!0,-1<ta.indexOf("iPhone")?$e="iPhone":-1<ta.indexOf("iPod")?$e="iPod":-1<ta.indexOf("iPad")&&($e="iPad"));var ea,aa,ia=-1<navigator.userAgent.toLowerCase().indexOf("safari/"),na=document.createElement("audio"),la=!1;na.canPlayType?(la=!0,ea=!!na.canPlayType&&""!=na.canPlayType("audio/mpeg"),aa=!!na.canPlayType&&""!=na.canPlayType('audio/ogg; codecs="vorbis"')):(ea=!0,aa=!1);var oa=hap_source_path+e.buttonsUrl.prev,ra=hap_source_path+e.buttonsUrl.prevOn,sa=hap_source_path+e.buttonsUrl.next,da=hap_source_path+e.buttonsUrl.nextOn,ua=hap_source_path+e.buttonsUrl.play,fa=hap_source_path+e.buttonsUrl.playOn,ca=hap_source_path+e.buttonsUrl.pause,pa=hap_source_path+e.buttonsUrl.pauseOn,ha=hap_source_path+e.buttonsUrl.loop,ma=hap_source_path+e.buttonsUrl.loopOn,ya=hap_source_path+e.buttonsUrl.volume,ga=hap_source_path+e.buttonsUrl.volumeOn,ba=hap_source_path+e.buttonsUrl.mute,va=hap_source_path+e.buttonsUrl.muteOn,_a=hap_source_path+e.buttonsUrl.shuffle,ka=hap_source_path+e.buttonsUrl.shuffleOn,Pa=hap_source_path+e.buttonsUrl.download,Ta=hap_source_path+e.buttonsUrl.downloadOn,wa=hap_source_path+e.buttonsUrl.trackUrlIcon,xa=hap_source_path+e.buttonsUrl.trackDownloadIcon,Ia=hap_source_path+e.buttonsUrl.trackRemoveIcon,Ma=hap_source_path+e.buttonsUrl.link_pause,Aa=hap_source_path+e.buttonsUrl.link_play,Sa=t(this).css("display","block"),Ca=Sa.hasClass("hap_circle"),Ea=!1;la&&Ye()&&(Ea=!0);var Oa="html5audio-popup"==Sa.attr("id"),Da=Sa.find(".playlistHolder"),ja=Sa.find(".playlist_inner").css("opacity",0);Sa.find(".playerHolder"),Sa.find(".player_mediaTime");var La=Sa.find(".player_mediaTime_current"),Na=Sa.find(".player_mediaTime_total"),Ra=Sa.find(".player_mediaName_Mask"),Fa=Sa.find(".player_mediaName");Sa.find(".player_controls");var qa=Sa.find(".player_volume"),Ba=Sa.find(".preloader"),za=Sa.find(".player_download");Sa.find(".componentPlaylist");var Ua=t(e.playlistList);Oa&&window.opener&&(Ua=window.opener.jQuery(e.playlistList));var Ya=e.sound_id,Va=e.autoPlay,Ha=e.autoPlay,Xa=e.autoPlay,Wa=e.autoLoad;isMobile&&(Va=!1,Xa=e.autoPlay=!1);var Qa=e.useOnlyMp3Format,Ga=e.soundcloudApiKey,$a=e.soundcloud_result_limit,Ka=e.podcast_result_limit,Ja=e.yt_playlist_result_limit,Za=e.ofm_result_limit,ti=e.useSongNameScroll,ei=e.autoSetSongTitle,ai=e.loopingOn,ii=e.randomPlay,ni=e.mediaTimeSeparator,li=e.seekTooltipSeparator,oi=e.defaultArtistData,ri=e.useNumbersInPlaylist,si=e.titleSeparator,di=e.activePlaylist,ui=e.useAlertMessaging,fi=e.activatePlaylistScroll,ci=e.playlistScrollOrientation.toLowerCase(),pi=e.sortablePlaylistItems,hi=e.autoReuseMailForDownload,mi=e.useRemoveBtnInTracks,yi=e.useVolumeTooltip,gi=e.useSeekbarTooltip,bi=e.playlistItemContent.toLowerCase(),vi=e.useKeyboardNavigation,_i=e.useBtnRollovers,ki=e.usePlaylistRollovers,Pi=e.getTrackInfoFromID3;La.html("0:00"),Na.html("0:00");var Ti=La.html(),wi=Na.html();Fa.html(oi),La.html(Ti+ni),Na.html(wi);var xi=!0;(!la||!ea&&Qa)&&(xi=!1);var Ii,Mi,Ai,Si,Ci,Ei,Oi,Di,ji,Li,Ni,Ri,Fi,qi,Bi,zi,Ui,Yi,Vi,Hi=!1,Xi="hap_processed",Wi="hap_draggable",Qi=!1;void 0!=Da.attr("data-playlistLocked")&&(Qi=!0);var Gi,$i,Ki,Ji,Zi,tn,en,an="playlist_locked",nn=!1,ln=null,on=!0,rn=!1,sn=!1,dn=50,un=!1,fn="",cn="",pn=!1,hn=250;ai&&Sa.find(".player_loop").find("img").attr("src",ma),ii&&Sa.find(".player_shuffle").find("img").attr("src",ka);var mn,yn=[],gn=[],bn=[],vn=0,_n=t('<div class="hap_feedParser"/>'),kn=0==Sa.find("iframe[id='dl_iframe']").length?t('<iframe id="dl_iframe"/>').css({position:"absolute",left:"-10000px",display:"none"}).appendTo(Sa):Sa.find("iframe[id='dl_iframe']"),Pn=t("<div/>"),Tn=t("<div/>");if(Ze)var wn,xn=3e3,In=0==Da.find("div[id='download_confirm']").length?t('<div id="download_confirm"><p>DOWNLOAD STARTING</p></DIV>').addClass("download_confirm").css({opacity:0,zIndex:1e3}).appendTo(Da):Da.find("div[id='download_confirm']");var Mn=[],An=[],Sn=e.flashAudio,Cn=e.circleMain;if(xi)var En,On,Dn=!1,jn=t('<div class="hap_audioHolder"/>');var Ln,Nn,Rn,Fn,qn,Bn,zn,Un,Yn,Vn,Hn,Xn,Wn=50,Qn=!1,Gn=!1,$n=e.flashYoutube,Kn=!1,Jn=100,Zn=!1,tl=!1,el=!1,al=!1,il=[];ti&&a();var nl=t.playlistManager({randomPlay:ii,loopingOn:ai});t(nl).bind("ap_PlaylistManager.COUNTER_READY",function(){var t=nl.getCounter(),e=yn[t];e&&!Qi&&(C(),ei&&Oe(),Zi=e.origtype?e.origtype:e.type,fn=e.mp3,cn=e.ogg,qi=e.download?!0:null,j(),_e(),"undefined"!=typeof itemTriggered&&itemTriggered(Qe,Ya,t))}),t(nl).bind("ap_PlaylistManager.PLAYLIST_END",function(){C(),"undefined"!=typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(Qe,Ya),pn=!1,Me("off")}),t(nl).bind("ap_PlaylistManager.PLAYLIST_END_ALERT",function(){"undefined"!=typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(Qe,Ya)});var ll,ol="",rl="",sl="";"ontouchstart"in window?(ll=!0,ol="touchstart.ap",rl="touchmove.ap",sl="touchend.ap"):(ll=!1,ol="mousedown.ap",rl="mousemove.ap",sl="mouseup.ap");var dl,ul=!1,fl=!1,cl=e.defaultVolume;0>cl&&(cl=0),0==cl?dl=.5:cl>1&&(cl=1);var pl=Sa.find(".volume_seekbar").css("cursor","pointer").bind(ol,function(t){return i(t),fl=!1}),hl="horizontal";if(void 0!=pl.attr("data-orientation")&&(hl=pl.attr("data-orientation").toLowerCase()),void 0!=pl.attr("data-autoHide")){var ml,ul=!0,yl=!1,gl=parseInt(pl.attr("data-autoHide"),10),bl=function(){ml&&clearTimeout(ml),pl.css("display","none"),yl=!1};isMobile||qa.bind("mouseover",function(){return We?(ml&&clearTimeout(ml),pl.css("display","block"),yl=!0,!1):!1}).bind("mouseout",function(){return We?(ml&&clearTimeout(ml),ml=setTimeout(bl,gl),!1):!1})}var vl=!1,_l=Sa.find(".volume_bg");if("horizontal"==hl)var kl=_l.width(),Pl=Sa.find(".volume_level").css("width",cl*kl+"px");else kl=_l.height(),Pl=Sa.find(".volume_level").css("height",cl*kl+"px");if(yi&&!isMobile){pl.bind("mouseover",r);var Tl=Sa.find(".player_volume_tooltip"),wl=parseInt(Tl.css("top"),10);Tl.bind("mouseenter",function(){pl.unbind("mouseover",r),Tl.css("display","none")}).bind("mouseleave",function(){pl.bind("mouseover",r)})}else Sa.find(".player_volume_tooltip").remove();var xl,Il,Ml=!1,Al=Sa.find(".progress_bg"),Sl=Sa.find(".load_progress"),Cl=Sa.find(".play_progress"),El=Sa.find(".player_progress"),Ol=Al.width(),Dl=!1;if(Ca){var jl=Sa.find(".load_canvas").css("cursor","pointer"),Ll=Sa.find(".play_canvas"),Nl=Sa.find(".circlePlayer"),Rl=parseFloat(Nl.attr("data-offOpacity"),10),Fl=parseFloat(Nl.attr("data-onOpacity"),10);isMobile&&(Rl=Fl=1);var ql={flash_id:e.flash_id,strokeSize:parseInt(Nl.attr("data-strokeSize"),10),play_color:Ll.attr("data-bgcolor"),load_color:jl.attr("data-bgcolor"),tolerance:parseInt(Nl.attr("data-tolerance"),10),offOpacity:Rl,onOpacity:Fl,circleWidth:jl.width(),circleHeight:jl.height()};if(Ea){var Bl,zl=ql.strokeSize,Ul=ql.play_color,Yl=ql.load_color,Vl=jl[0].getContext("2d"),Hl=Ll[0].getContext("2d"),Xl=2*Math.PI,Wl=Math.PI/2,Ql=ql.circleWidth,Gl=ql.circleHeight,$l=Ql/2,Kl=$l-zl,Jl=e.tolerance,Zl=!1,to=0;jl.bind(ol,function(t){return Zl=k(t)?!1:!0,u(t),!1}),El=jl}else jl.remove(),Ll.remove()}else El=Sa.find(".player_progress").css("cursor","pointer").bind(ol,function(t){return u(t),!1});if(gi&&!isMobile){El.bind("mouseover",h);var eo=Sa.find(".player_progress_tooltip").css("zIndex",50);eo.find("p").html("0:00"+li+"0:00"),eo.bind("mouseenter",function(){El.unbind("mouseover",h),eo.css("display","none")}).bind("mouseleave",function(){El.bind("mouseover",h)})}else Sa.find(".player_progress_tooltip").remove();return this.flashVideoPause=function(){Me("off"),pn=!1,ve()},this.flashVideoResume=function(){Ae("off"),pn=!0,be()},this.flashVideoEnd=function(){ge()},this.flashVideoStart=function(){Ae("off"),un=pn=!0,be()},this.flashYoutubeData=function(t,e,a,i){Ca?(Se(t)&&Se(e)&&"undefined"!=typeof ue(Cn)&&ue(Cn).pb_drawLoadbar(t/e),Se(a)&&Se(i)&&(to=a/i,Ml||"undefined"!=typeof ue(Cn)&&ue(Cn).pb_drawSeekbar(a/i))):(Se(t)&&Se(e)&&Sl&&Sl.width(t/e*Ol),Se(a)&&Se(i)&&Cl&&Cl.width(a/i*Ol)),Se(a)&&Se(i)&&(La&&La.html(Ce(a)+ni),Na&&Na.html(Ee(i)))},this.flashAudioData=function(t,e,a,i){t/=e,Ca?Ea?(Se(t)&&v(t),Se(a)&&Se(i)&&(to=a/i,!Ml&&pn&&b(a/i))):(null!==t&&"undefined"!=typeof ue(Cn)&&ue(Cn).pb_drawLoadbar(t),Se(a)&&Se(i)&&(to=a/i,Ml||"undefined"!=typeof ue(Cn)&&ue(Cn).pb_drawSeekbar(a/i))):(!Ml&&Cl&&Cl.width(a/i*Ol),null!==t&&(t*=Ol,t>Ol&&(t=Ol),Sl&&Sl.width(t)),Se(a)&&Se(i)&&(La&&La.html(Ce(a)+ni),Na&&Na.html(Ee(i))))},this.flashAudioEnd=function(){ge()},this.flashCircleToggle=function(){w()},this.flashCircleOverLoader=function(t){eo.css("display","block"),g(t)},this.flashCircleOutLoader=function(){eo.css("display","none")},this.flashCircleSeek=function(t){p(t)},this.embedFlash=function(){if(la)e.useOnlyMp3Format&&!ea&&(t=Sn.substr(1),embedFlashAudio(t));else{var t=$n.substr(1);embedFlashMain(t),t=Sn.substr(1),embedFlashAudio(t),Ca&&(t=Cn.substr(1),embedFlashCircle(t))}},vi&&Je.keyup(function(t){return!We||on?!1:(t||(t=window.event),t.cancelBubble?t.cancelBubble=!0:t.stopPropagation&&t.stopPropagation(),t=t.keyCode,37==t?Qe.previousAudio():39==t?Qe.nextAudio():32==t?Qe.toggleAudio():77==t&&(l(),o()),!1)}),Ke.resize(function(){return!We||on?!1:(Ge&&clearTimeout(Ge),Ge=setTimeout(Pe,150),void 0)}),this.setPlayIcon=function(){Yi&&Yi.hasClass("play_link")&&Yi.attr("src",Aa),pn=!1},this.playAudio=function(){if(!We||on||!ln||pn||!un)return!1;if("youtube_single"==Zi||"youtube_playlist"==Zi){if(!tl)return!1;la?Ln.togglePlayback():"undefined"!=typeof ue($n)&&ue($n).pb_togglePlayback()}else xi?On&&On.play():"undefined"!=typeof ue(Sn)&&ue(Sn).pb_play();Ae("off"),un=pn=!0},this.pauseAudio=function(){if(!We||on||!ln||!pn||!un)return!1;if("youtube_single"==Zi||"youtube_playlist"==Zi){if(!tl)return!1;la?Ln.togglePlayback():"undefined"!=typeof ue($n)&&ue($n).pb_togglePlayback()}else xi?On&&On.pause():"undefined"!=typeof ue(Sn)&&ue(Sn).pb_pause();Me("off"),pn=!1},this.toggleAudio=function(){return We&&!on&&ln&&un?(w(),void 0):!1},this.stopAudio=function(){if(!We||on||!ln||!un)return!1;if("youtube_single"==Zi||"youtube_playlist"==Zi){if(!tl)return!1;la?Ln.stop():"undefined"!=typeof ue($n)&&ue($n).pb_dispose()}else xi?On&&(On.src="",ea?On.src=fn:aa&&(On.src=cn)):"undefined"!=typeof ue(Sn)&&ue(Sn).pb_dispose();Ie(),pn=!1},this.checkAudio=function(t){if(!We||on||!ln)return!1;if(t=t.toLowerCase(),pn){if("pause"==t)if("youtube_single"==Zi||"youtube_playlist"==Zi){if(!tl)return!1;la?Ln.togglePlayback():"undefined"!=typeof ue($n)&&ue($n).pb_togglePlayback()}else xi?On&&On.pause():"undefined"!=typeof ue(Sn)&&ue(Sn).pb_pause();else if("stop"==t){if("youtube_single"==Zi||"youtube_playlist"==Zi){if(!tl)return!1;Ln.stop()}else xi?On&&(On.src="",ea?On.src=fn:aa&&(On.src=cn)):"undefined"!=typeof ue(Sn)&&ue(Sn).pb_dispose();Ie()}pn=!1,Me("off")}},this.nextAudio=function(){return We&&!on&&ln?(S(),nl.advanceHandler(1,!0),void 0):!1},this.previousAudio=function(){return We&&!on&&ln?(S(),nl.advanceHandler(-1,!0),void 0):!1},this.loadAudio=function(t){if(!We||on||!ln)return!1;if("string"==typeof t){var e=0,a=!1;for(e;vn>e;e++)if(t==yn[e].title){t=e,a=!0;break}if(!a)return ui&&alert('Track with name "'+t+'" doesnt exist. Load audio failed.'),!1}else{if("number"!=typeof t)return ui&&alert("Load audio method requires either a track number or a track title to load. Load audio failed."),!1;if(0>t||t>vn-1)return ui&&alert('Invalid track number. Track number "'+t+'" doesnt exist. Load audio failed.'),!1}S(),nl.processPlaylistRequest(t)},this.loadPlaylist=function(t){return!We||on?!1:"undefined"==typeof t?(ui&&alert("loadPlaylist method requires data parameter. loadPlaylist failed."),!1):(di=t,L(di),void 0)},this.addTrack=function(e,a,i,n){if(!We||on)return!1;if("undefined"==typeof e)return ui&&alert("addTrack method requires type parameter. AddTrack failed."),!1;if("undefined"==typeof a)return ui&&alert("addTrack method requires format parameter. AddTrack failed."),!1;if("undefined"==typeof i)return ui&&alert("addTrack method requires track parameter. AddTrack failed."),!1;var l=1,o=!1;if("string"!=typeof i&&"[object Object]"!==Object.prototype.toString.call(i)){if("[object Array]"!==Object.prototype.toString.call(i))return ui&&alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;l=i.length,o=!0}if(Ai=n,e=e.toLowerCase(),"visible"==e?(ln&&Hi&&D(),Si=!0,Hi=!1):(ln&&!Hi&&D(),Hi=Ci=!0),Mi=!1,ln)if("undefined"!=typeof Ai){if(0>Ai||Ai>vn)return ui&&alert('Invalid position to insert track to. Position number "'+n+'" doesnt exist. AddTrack failed.'),!1;Ai==vn&&(Mi=!0)}else Mi=!0,Ai=vn;else{if("undefined"!=typeof Ai){if(0!=Ai)return ui&&alert('Invalid position to insert track to. Position number "'+n+'" doesnt exist. AddTrack failed.'),!1}else Ai=0;Mi=!0}we(),on=!0,nn=!1,n=0;var r;r="playlist"+Math.floor(9999*Math.random());var s=t("<ul id = "+r+"></ul>");for(a=a.toLowerCase(),n;l>n;n++)r=o?i[n]:i,"html"==a?He(r).appendTo(s):(r.type&&r.mp3||r.path)&&Ve(r).appendTo(s);An=[],Pn.empty(),s.appendTo(Pn).find("li[class='playlistItem']").each(function(){An.push(t(this))}),Ei=!1,ln||(Ei=!0,ln="visible"==e?ja:Tn),N()},this.inputAudio=function(t){return!We||on?!1:"undefined"==typeof t?(ui&&alert("inputAudio method requires data parameter. inputAudio failed."),!1):"undefined"===t.mp3?(ui&&alert("inputAudio method requires data.mp3 parameter. inputAudio failed."),!1):(S(),nl.reSetCounter(),fn=t.mp3,"undefined"!==t.ogg&&(cn=t.ogg),"undefined"!==t.title?Oe(t.title):Oe(oi),isMobile&&(Va=!0,xi||"undefined"!=typeof ue(Sn)&&ue(Sn).pb_setAutoplay(!0)),j(),_e(),void 0)},this.removeTrack=function(t){if(!We||on||!ln)return!1;if("undefined"==typeof t)return ui&&alert("removeTrack method requires track parameter. removeTrack failed."),!1;if("string"==typeof t){var e=0,a=!1;for(e;vn>e;e++)if(t==yn[e].title){t=e,a=!0;break}if(!a)return ui&&alert('Track with name "'+t+'" doesnt exist. RemoveTrack failed.'),!1;bn[t]&&yn[t]?(bn[t].remove(),yn.splice(t,1),Xe(t)):ui&&alert('RemoveTrack with name "'+t+'" failed.')}else if("number"==typeof t){if(0>t||t>vn-1)return ui&&alert('Invalid track number. Track number "'+t+'" doesnt exist. RemoveTrack failed.'),!1;bn[t]&&yn[t]?(bn[t].remove(),yn.splice(t,1),Xe(t)):ui&&alert('RemoveTrack with name "'+t+'" failed.')}else{if("[object Array]"!==Object.prototype.toString.call(t))return ui&&alert("removeTrack method requires track parameter as string, number or array. removeTrack failed."),!1;if("string"==typeof t[0]?e=!0:"number"==typeof t[0]&&(e=!1),e){var i,n,l,e=0,a=t.length;t:for(;a>e;e++)if(n=t[e],"string"==typeof n){if(l=0,i=yn.length,0==i){Xe();break t}for(l;i>l;l++)if(n==yn[l].title&&bn[l]&&yn[l]){bn[l].remove(),yn.splice(l,1),Xe(l);break}}}else t:for(t.sort(ze),e=0,a=t.length,e;a>e;e++)if(n=t[e],"number"==typeof n){if(i=yn.length,0==i){Xe();break t}n>-1&&i>n&&bn[n]&&yn[n]&&(bn[n].remove(),yn.splice(n,1),Xe(n))}}},this.destroyAudio=function(){return We&&!on&&ln?(O(),void 0):!1},this.destroyPlaylist=function(){return We&&!on&&ln?(D(),void 0):!1},this.setTitle=function(t){return We&&!on&&ln?(Oe(t),void 0):!1},this.toggleShuffle=function(){return!We||on?!1:(ii?(Sa.find(".player_shuffle").find("img").attr("src",_a),ii=!1):(Sa.find(".player_shuffle").find("img").attr("src",ka),ii=!0),nl.setRandom(ii),void 0)},this.toggleLoop=function(){return!We||on?!1:(ai?(Sa.find(".player_loop").find("img").attr("src",ha),ai=!1):(Sa.find(".player_loop").find("img").attr("src",ma),ai=!0),nl.setLooping(ai),void 0)},this.setVolume=function(t){return!We||on?!1:(0>t?t=0:t>1&&(t=1),cl=t,o(),void 0)},this.getVolume=function(){return We?cl:!1},this.setAutoPlay=function(t){return We?(Va=t,xi||"undefined"!=typeof ue(Sn)&&ue(Sn).pb_setAutoplay(t),void 0):!1},this.getAutoPlay=function(){return We?Va:!1},this.getIsMobile=function(){return isMobile},this.getMobileType=function(){return $e},this.getSetupDone=function(){return We},this.getPlaylistLoaded=function(){return nn},this.getPlaylistTransition=function(){return on},this.getMediaPlaying=function(){return!We||on?!1:pn},this.getAudioInited=function(){return!We||on?!1:un},this.getMediaType=function(){return!We||on?!1:Zi},this.getActiveItem=function(){return!We||on?!1:nl.getCounter()},this.getPlaylistItems=function(t){return We&&!on&&bn&&0!=bn.length?"string"==typeof t?bn:"number"==typeof t?0>num||num>vn-1||!bn[num]?!1:bn[num]:void 0:!1},this.getMediaCount=function(){return!We||on?!1:Se(vn)?vn:0},this.getPlaylistHidden=function(){return!We||on?!1:Hi},this.get_hidden_playlist_holder=function(){return We?Tn:!1},this.getPlaylistList=function(){return We&&Ua&&0!=Ua.length?Ua:!1},this.orderPlaylist=function(e,a){if(!We||!ln)return!1;if("undefined"==typeof e)return ui&&alert("orderPlaylist method requires action parameter. orderPlaylist failed."),!1;var i=ln.children("li"),n=i.length;if(0==n)return!1;var l=e.toLowerCase();if("reverse"==l)ln.append(i.get().reverse());else{if("random"!=l&&"remap"!=l&&"swap"!=l)return ui&&alert("Wrong action parameter for orderPlaylist method. orderPlaylist failed."),!1;if("random"==l)a=Le(n);else if("remap"==l){if("undefined"==typeof a||a.length!=n)return!1}else{if("swap"!=l)return!1;if("undefined"==typeof a||2!=a.length)return!1;i=Ne(n),i.splice(a[1],1,a[0]),i.splice(a[0],1,a[1]),a=t.extend(!0,[],i)}orderedItems=jQuery.map(a,function(t){return jQuery(bn).get(t)}),ln.empty().html(orderedItems)}B(),(i=ja.find("a[class=playlistSelected]").attr("data-id"))&&(nl.reSetCounter(i),ei&&Oe())},this.checkScroll=function(){return We&&!on&&ln?(P(),void 0):!1},this.reinitScroll=function(){return We&&!on&&ln?(mn&&(mn.reinitialise(),"vertical"==ci?(mn.scrollToY(0),t(".jspPane").css("top","0px")):(mn.scrollToX(0),t(".jspPane").css("left","0px"))),ti&&Xn&&nl&&-1!=nl.getCounter()&&ei&&Oe(),void 0):!1},this.getPlaylistData=function(){return We&&!on&&ln?yn:!1},this.getSoundId=function(){return We?Ya:!1},this.getTouch=function(){return We?ll:!1},this.get_hap_source_path=function(){return We?hap_source_path:!1},la?(t(".flashMain").remove(),t(".circleMain").remove(),xi?(t(".flashAudio").remove(),ke()):le()):ae(),this}}(jQuery);